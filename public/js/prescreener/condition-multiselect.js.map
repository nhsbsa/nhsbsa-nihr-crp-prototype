{"version":3,"file":"prescreener/condition-multiselect.js","names":["fetchJSON","url","fetch","headers","then","r","ok","Error","status","json","normalise","s","toString","toLowerCase","templateOption","text","i","checked","active","templateChip","ConditionMultiselect","cfg","$input","document","querySelector","input","$listbox","listbox","$dropdown","dropdown","$chips","chips","$hidden","hidden","$count","count","$panel","panel","closest","parentElement","$empty","empty","getElementById","source","all","filtered","selected","Set","window","CRPDATA","activeIndex","bindBase","load","prototype","map","item","name","slice","render","catch","err","console","error","message","self","addEventListener","open","q","value","filter","c","includes","length","renderList","e","key","isOpen","preventDefault","move","toggleActive","close","target","parseInt","getAttribute","focus","delta","max","Math","min","setAttribute","highlightActive","ensureActiveInView","has","delete","add","renderChips","syncHidden","updateCount","html","t","join","innerHTML","items","Array","from","values","style","display","contains","prepend","querySelectorAll","forEach","btn","val","escapeHTML","textContent","size","el","classList","toggle","parent","top","offsetTop","bottom","offsetHeight","viewTop","scrollTop","viewBottom","clientHeight","d","createElement","innerText","initConditionMultiselect"],"sources":["prescreener/condition-multiselect.js"],"sourcesContent":["/* public/js/prescreener/condition-multiselect.js */\n/* eslint-disable */\n(function () {\n  function fetchJSON (url) {\n    return fetch(url, { headers: { 'Accept': 'application/json' } }).then(r => {\n      if (!r.ok) throw new Error('Failed to load ' + url + ' -> ' + r.status)\n      return r.json()\n    })\n  }\n\n  function normalise (s) { return (s || '').toString().toLowerCase() }\n\n  function templateOption (text, i, checked, active) {\n    return `\n      <li id=\"opt-${i}\" class=\"crp-combobox__option ${active ? 'is-active' : ''}\"\n          role=\"option\" aria-selected=\"${checked ? 'true' : 'false'}\" data-index=\"${i}\">\n        <span class=\"crp-combobox__checkbox\" aria-hidden=\"true\">\n          <input type=\"checkbox\" tabindex=\"-1\" ${checked ? 'checked' : ''}/>\n        </span>\n        <span class=\"crp-combobox__text\">${text}</span>\n      </li>`\n  }\n\n  function templateChip (text) {\n    return `\n      <span class=\"crp-chip\">\n        <span class=\"crp-chip__text\">${text}</span>\n        <button type=\"button\" class=\"crp-chip__remove\" aria-label=\"Remove ${text}\" data-chip=\"${text}\">Ã—</button>\n      </span>`\n  }\n\n  function ConditionMultiselect (cfg) {\n    this.$input    = document.querySelector(cfg.input)\n    this.$listbox  = document.querySelector(cfg.listbox)\n    this.$dropdown = document.querySelector(cfg.dropdown)\n    this.$chips    = document.querySelector(cfg.chips)\n    this.$hidden   = document.querySelector(cfg.hidden)\n    this.$count    = document.querySelector(cfg.count)\n\n    // Panel container lets us find an empty-state even if it's not inside chips\n    this.$panel = cfg.panel ? document.querySelector(cfg.panel) : null\n    if (!this.$panel && this.$chips) {\n      // nearest \".crp-selected\" or the chips' parent as a fallback\n      this.$panel = this.$chips.closest('.crp-selected') || this.$chips.parentElement\n    }\n\n    // Find an empty-state element in several sensible places\n    this.$empty =\n      (cfg.empty && document.querySelector(cfg.empty)) ||\n      (this.$chips && this.$chips.querySelector('.crp-empty')) ||\n      (this.$panel && this.$panel.querySelector('.crp-empty')) ||\n      document.getElementById('selected-empty') || null\n\n    this.source = cfg.source\n\n    this.all = []            // array of strings\n    this.filtered = []\n    this.selected = new Set((window.CRPDATA && window.CRPDATA.selected) || [])\n\n    this.activeIndex = -1\n    this.bindBase()\n    this.load()\n  }\n\n  ConditionMultiselect.prototype.load = function () {\n    fetchJSON(this.source).then(json => {\n      // Accept either [{name:..}, ..] or [\"..\", \"..\"]\n      this.all = json.map(item => typeof item === 'string' ? item : item.name)\n      this.filtered = this.all.slice(0)\n      this.render()\n    }).catch(err => {\n      console.error('[conditions] ' + err.message)\n      this.all = []\n      this.filtered = []\n      this.render()\n    })\n  }\n\n  ConditionMultiselect.prototype.bindBase = function () {\n    var self = this\n\n    this.$input.addEventListener('focus', function () {\n      self.open()\n    })\n\n    this.$input.addEventListener('input', function () {\n      var q = normalise(self.$input.value)\n      self.filtered = self.all.filter(c => normalise(c).includes(q))\n      self.activeIndex = self.filtered.length ? 0 : -1\n      self.open()\n      self.renderList()\n    })\n\n    this.$input.addEventListener('keydown', function (e) {\n      var key = e.key\n      if (!self.isOpen() && (key === 'ArrowDown' || key === 'ArrowUp')) self.open()\n      if (key === 'ArrowDown') {\n        e.preventDefault(); self.move(1)\n      } else if (key === 'ArrowUp') {\n        e.preventDefault(); self.move(-1)\n      } else if (key === 'Enter' || key === ' ') {\n        if (self.isOpen() && self.activeIndex > -1) { e.preventDefault(); self.toggleActive() }\n      } else if (key === 'Escape') {\n        self.close()\n      }\n    })\n\n    document.addEventListener('click', function (e) {\n      if (!e.target.closest('.crp-combobox')) self.close()\n    })\n\n    this.$listbox.addEventListener('click', function (e) {\n      var item = e.target.closest('[data-index]')\n      if (!item) return\n      self.activeIndex = parseInt(item.getAttribute('data-index'), 10)\n      self.toggleActive()\n      self.$input.focus()\n    })\n  }\n\n  ConditionMultiselect.prototype.move = function (delta) {\n    var max = this.filtered.length - 1\n    if (max < 0) return\n    this.activeIndex = Math.max(0, Math.min(max, this.activeIndex + delta))\n    this.$input.setAttribute('aria-activedescendant', 'opt-' + this.activeIndex)\n    this.highlightActive()\n    this.ensureActiveInView()\n  }\n\n  ConditionMultiselect.prototype.toggleActive = function () {\n    var item = this.filtered[this.activeIndex]\n    if (!item) return\n    if (this.selected.has(item)) this.selected.delete(item)\n    else this.selected.add(item)\n    this.render()\n  }\n\n  ConditionMultiselect.prototype.render = function () {\n    this.renderList()\n    this.renderChips()\n    this.syncHidden()\n    this.updateCount()\n  }\n\n  ConditionMultiselect.prototype.renderList = function () {\n    var html = this.filtered.map((t, i) => templateOption(t, i, this.selected.has(t), i === this.activeIndex)).join('')\n    this.$listbox.innerHTML = html || '<li class=\"crp-combobox__empty\">No results</li>'\n  }\n\n  ConditionMultiselect.prototype.renderChips = function () {\n    var items = Array.from(this.selected.values())\n    this.$chips.innerHTML = items.map(templateChip).join('')\n\n    // Robust empty-state toggle (inside chips, or elsewhere in the panel)\n    if (this.$empty) {\n      this.$empty.style.display = items.length ? 'none' : ''\n      // If the empty element is meant to sit inside the chips container, keep it there\n      if (this.$chips && !this.$chips.contains(this.$empty) && this.$empty.closest('.crp-selected') === this.$chips.closest('.crp-selected')) {\n        this.$chips.prepend(this.$empty)\n      }\n    }\n\n    var self = this\n    this.$chips.querySelectorAll('.crp-chip__remove').forEach(function (btn) {\n      btn.addEventListener('click', function () {\n        var value = btn.getAttribute('data-chip')\n        self.selected.delete(value)\n        self.render()\n        self.$input.focus()\n      })\n    })\n  }\n\n  ConditionMultiselect.prototype.syncHidden = function () {\n    var items = Array.from(this.selected.values())\n    this.$hidden.innerHTML = items.map(val => `<input type=\"hidden\" name=\"conditions\" value=\"${escapeHTML(val)}\">`).join('')\n  }\n\n  ConditionMultiselect.prototype.updateCount = function () {\n    if (this.$count) this.$count.textContent = this.selected.size.toString()\n  }\n\n  ConditionMultiselect.prototype.isOpen = function () {\n    return this.$input.getAttribute('aria-expanded') === 'true'\n  }\n  ConditionMultiselect.prototype.open = function () {\n    this.$dropdown.hidden = false\n    this.$input.setAttribute('aria-expanded', 'true')\n  }\n  ConditionMultiselect.prototype.close = function () {\n    this.$dropdown.hidden = true\n    this.$input.setAttribute('aria-expanded', 'false')\n    this.activeIndex = -1\n    this.highlightActive()\n  }\n\n  ConditionMultiselect.prototype.highlightActive = function () {\n    this.$listbox.querySelectorAll('.crp-combobox__option').forEach((el, i) => {\n      el.classList.toggle('is-active', i === this.activeIndex)\n    })\n  }\n\n  ConditionMultiselect.prototype.ensureActiveInView = function () {\n    var el = this.$listbox.querySelector('[data-index=\"' + this.activeIndex + '\"]')\n    if (!el) return\n    var parent = this.$listbox\n    var top = el.offsetTop\n    var bottom = top + el.offsetHeight\n    var viewTop = parent.scrollTop\n    var viewBottom = viewTop + parent.clientHeight\n    if (top < viewTop) parent.scrollTop = top\n    else if (bottom > viewBottom) parent.scrollTop = bottom - parent.clientHeight\n  }\n\n  function escapeHTML (s) {\n    var d = document.createElement('div'); d.innerText = s; return d.innerHTML\n  }\n\n  window.initConditionMultiselect = function (cfg) {\n    new ConditionMultiselect(cfg)\n  }\n})()\n"],"mappings":"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","ignoreList":[]}