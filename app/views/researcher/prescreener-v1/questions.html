{% set pageTitle = "Add additional pre-screening questions" %}
{% extends "researcher/layout-researcher.html" %}

{% set containerClasses = "dashboard" %}

{% block content %}
    {{ backLink({
        "href": "javascript:history.go(-1)",
        "text": "Back"
      }) }}

  <h1 class="nhsuk-heading-xl">{{ pageTitle }}</h1>

  <p class="nhsuk-body">You can ask volunteers up to 5 additional questions.</p>
  <p class="nhsuk-body">You should add your questions in the order you'd like them to appear in the pre-screener.</p>

  <p class="nhsuk-body">Make sure you:</p>
  <ul class="nhsuk-list nhsuk-list--bullet">
    <li>ask questions with yes or no answers</li>
    <li>only collect information relevant to your study</li>
  </ul>

  <div class="nhsuk-inset-text">
    <span class="nhsuk-u-visually-hidden">Information: </span>
    <p>
      If you want to ask questions about volunteers' health conditions or medications, do not add them here.
      <a href="/researcher/prescreener/choose-methods">Go back to add these types of questions.</a>
    </p>
  </div>

  {# Prefill from session #}
  {% set q = (data.prescreener and data.prescreener.questions and data.prescreener.questions[0]) or {} %}
  {% set exclusion = q.exclusion | default('no-exclusion') %}
  {% set matchVal  = q.matchValue | default('') %}

  <form method="post" action="/researcher/prescreener/questions/save" novalidate>
    <h2 class="nhsuk-heading-l nhsuk-u-margin-bottom-2">Question 1</h2>

    <div class="nhsuk-form-group">
      <label class="nhsuk-label" for="questionText">Write your question hereâ€¦</label>
      <textarea class="nhsuk-textarea" id="questionText" name="questionText" rows="4" maxlength="200">{{ q.text | default('') }}</textarea>
      <div class="nhsuk-hint">You can enter up to 200 characters</div>
    </div>

    <h3 class="nhsuk-heading-m nhsuk-u-margin-top-4">Select the matching answer</h3>
    <p class="nhsuk-hint nhsuk-u-margin-bottom-2">
      This is the answer the volunteer needs to give to be a match for your study.
    </p>
    <div class="nhsuk-radios">
      <div class="nhsuk-radios__item">
        <input class="nhsuk-radios__input" id="matching-yes" name="matchingAnswer" type="radio" value="yes" {% if matchVal == 'yes' %}checked{% endif %}>
        <label class="nhsuk-label nhsuk-radios__label" for="matching-yes">Yes</label>
      </div>
      <div class="nhsuk-radios__item">
        <input class="nhsuk-radios__input" id="matching-no" name="matchingAnswer" type="radio" value="no" {% if matchVal == 'no' %}checked{% endif %}>
        <label class="nhsuk-label nhsuk-radios__label" for="matching-no">No</label>
      </div>
    </div>

    <h3 class="nhsuk-heading-m nhsuk-u-margin-top-5">Will this question exclude volunteers?</h3>
    <div class="nhsuk-radios">
      <div class="nhsuk-radios__item">
        <input class="nhsuk-radios__input" id="exclude-yes" name="exclusion" type="radio" value="exclude-on-answer" {% if exclusion == 'exclude-on-answer' %}checked{% endif %}>
        <label class="nhsuk-label nhsuk-radios__label" for="exclude-yes">Yes</label>
        <div class="nhsuk-hint nhsuk-radios__hint">
          Volunteers who do not give the matching answer will be excluded from your study.
        </div>
      </div>
      <div class="nhsuk-radios__item">
        <input class="nhsuk-radios__input" id="exclude-no" name="exclusion" type="radio" value="no-exclusion" {% if exclusion == 'no-exclusion' %}checked{% endif %}>
        <label class="nhsuk-label nhsuk-radios__label" for="exclude-no">No</label>
        <div class="nhsuk-hint nhsuk-radios__hint">
          Volunteers who do not give the matching answer will show as a <strong>partial match</strong> and you will still be able to contact them.
          You can only include one partial match question.
        </div>
      </div>
    </div>

    <div class="nhsuk-u-margin-top-6">
      <button type="button" class="nhsuk-button nhsuk-button--secondary">Add another question</button>
      <button type="submit" class="nhsuk-button nhsuk-u-margin-left-2" name="__action" value="continue">Save and continue</button>
    </div>
  </form>
{% endblock %}
